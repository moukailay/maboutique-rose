Cahier des charges dÃ©taillÃ© â€“ Connexion Utilisateurs & Admins
Technologies :

Frontend : Next.js 15, TypeScript, Tailwind CSS

Backend/API : Next.js Route Handlers, Prisma ORM

Base de donnÃ©es : PostgreSQL

Authentification : JWT (JSON Web Token)

ğŸ“Œ Contexte gÃ©nÃ©ral :
Lâ€™icÃ´ne Â« Utilisateur Â» placÃ©e en haut Ã  droite dans le header du site permet Ã  la fois aux clients et aux administrateurs de se connecter ou de crÃ©er un compte.

Lorsque lâ€™utilisateur clique sur cette icÃ´ne, une petite fenÃªtre contextuelle (dropdown) apparaÃ®t, prÃ©sentant deux choix clairement sÃ©parÃ©s :

Connexion Client

Connexion Administrateur

1. Interface et gestion du clic sur lâ€™icÃ´ne utilisateur (dans le header) :
Au clic sur lâ€™icÃ´ne utilisateur dans le header (en haut Ã  droite) :

Dropdown clair et simple avec :

Bouton Â« Client Â»

Bouton Â« Admin Â»

Style recommandÃ© (avec Tailwind CSS) :

Fond blanc (bg-white), coins arrondis (rounded-lg), ombre lÃ©gÃ¨re (shadow-md)

Boutons avec texte clair :

Client (text-gray-700 hover:text-green-500)

Admin (text-gray-700 hover:text-pink-600)

2. Processus de connexion dÃ©taillÃ© cÃ´tÃ© CLIENT :
ğŸ¯ En tant que Client, je clique sur Â« Client Â» :
Redirection vers la page : /login
(formulaire de connexion standard cÃ´tÃ© client)

Formulaire de connexion Client :

Champs requis :

Email

Mot de passe

Bouton : Â« Se connecter Â»

Lien rapide : Â« Pas encore inscrit ? CrÃ©ez votre compte Â»

Validation cÃ´tÃ© frontend :

VÃ©rification rapide de la validitÃ© des champs (format email correct, mot de passe rempli).

Gestion du succÃ¨s :

Redirection automatique vers la page dâ€™accueil avec un message discret : Â« Bienvenue [nom du client] Â»

Gestion des erreurs :

Message clair en rouge : Â« Email ou mot de passe incorrect Â»

ğŸ¯ En tant que Client, si je clique sur Â« CrÃ©er votre compte Â» :
Redirection vers /inscription :

Formulaire dâ€™inscription Client :

Champs requis :

PrÃ©nom

Nom

Email

Mot de passe (8 caractÃ¨res minimum, avec au moins 1 majuscule, 1 minuscule, 1 chiffre)

Bouton : Â« CrÃ©er mon compte Â»

Gestion du succÃ¨s :

Redirection vers page dâ€™accueil, client connectÃ© automatiquement.

Message de bienvenue clair.

Gestion des erreurs :

Message prÃ©cis indiquant la cause (email existant, mot de passe faible, etc.)

ğŸ¯ Ã‰tat connectÃ© du client :
Lorsquâ€™un client est connectÃ©, son profil est actif :

PrÃ©fÃ©rences personnelles sauvegardÃ©es (panier, historique de commande, avis dÃ©posÃ©s).

Toutes ses activitÃ©s (historique d'achat, avis, favoris) sont sauvegardÃ©es en base de donnÃ©es (PostgreSQL via Prisma).

IcÃ´ne utilisateur indique l'Ã©tat connectÃ© (par exemple une petite coche verte âœ…).

3. Processus de connexion dÃ©taillÃ© cÃ´tÃ© ADMIN :
ğŸ¯ En tant quâ€™Administrateur, je clique sur Â« Admin Â» :
Redirection immÃ©diate vers : /admin/login

Formulaire de connexion Admin :

Champs requis :

Email administrateur

Mot de passe administrateur

Bouton : Â« Se connecter Ã  lâ€™interface Admin Â»

Validation stricte cÃ´tÃ© serveur :

VÃ©rification de lâ€™existence du compte administrateur.

VÃ©rification des permissions (rÃ´le admin).

Gestion du succÃ¨s :

Redirection directe vers /admin/dashboard

Message discret confirmant la connexion.

Gestion des erreurs :

Message clair en rouge : Â« AccÃ¨s refusÃ©. Email ou mot de passe incorrect Â»

4. Ã‰tat connectÃ© de lâ€™Administrateur :
En Ã©tant connectÃ© en tant quâ€™admin :

AccÃ¨s complet Ã  lâ€™interface administrateur.

Session sÃ©curisÃ©e par JWT avec expiration automatique aprÃ¨s une certaine pÃ©riode (ex : 24h).

PossibilitÃ© de dÃ©connexion simple via la sidebar dans lâ€™interface admin.

Lâ€™administrateur nâ€™a jamais accÃ¨s aux espaces personnels des clients.

5. SÃ©curitÃ© et permissions :
Authentification JWT (JSON Web Token) pour sÃ©curiser les sessions.

Routes API sÃ©curisÃ©es, protÃ©gÃ©es par rÃ´le (client ou admin).

VÃ©rification stricte des permissions cÃ´tÃ© serveur.

Aucune possibilitÃ© pour un utilisateur dâ€™accÃ©der Ã  lâ€™espace admin sans permissions spÃ©cifiques cÃ´tÃ© backend.

